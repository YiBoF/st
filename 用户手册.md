### **数据可视化平台用户手册**

---

## **1. 介绍**

数据可视化平台是一个基于网页的应用程序，旨在帮助用户以交互的方式可视化数据。它使用Python构建，并结合了多个强大的库，如Streamlit、Pandas、Matplotlib、Seaborn和Plotly Express。此应用程序允许用户连接到Druid数据源或生成模拟数据集以进行可视化。

## **2. 安装与设置**

### **系统要求**
- Python 3.7或更高版本。
- 依赖库：Streamlit、Pandas、Matplotlib、Seaborn、Plotly、NumPy、Requests，及PyTorch。

### **安装步骤**
1. **克隆仓库**：下载或克隆项目文件到本地机器。
2. **安装依赖**：在项目目录下打开终端并运行：
   ```bash
   pip install -r requirements.txt
   ```
3. **运行应用程序**：通过执行以下命令启动Streamlit服务器：
   ```bash
   streamlit run st_DVP.py
   ```
4. **访问网页界面**：打开网页浏览器并访问 `http://localhost:8501`。

## **3. 认证**

该应用程序配置为在连接Druid数据源时使用基本的HTTP认证。

### **默认凭据**
- **用户名**：`admin`
- **密码**：`password1`

### **修改凭据**
要更改凭据，请找到 `stTest.py` 文件中的以下行：
```python
USERNAME = "admin"
PASSWORD = "password1"
```
将这些值替换为您所需的凭据。

### **处理认证错误**
如果认证失败：
- 确保凭据与Druid服务器所需的凭据一致。
- 验证Druid服务器的URL及其可访问性。

## **4. 使用应用程序**

### **4.1 选择数据集**
1. **连接到Druid**：如果已连接，数据将自动从Druid服务器获取。
2. **生成模拟数据**：或者，您可以通过选择“模拟数据”选项来生成随机数据集。

### **4.2 选择数据列**
- 使用下拉菜单选择要可视化的数据列。
- 选择的数据列将显示在“选定的数据项”下。

### **4.3 数据可视化**
- **折线图**：默认情况下，所选列的折线图将显示。
- **散点图**：要将数据可视化为散点图，请从下拉菜单中选择“散点图”。
- 图表将根据您的选择动态更新。

### **4.4 解读可视化结果**
- **折线图**：适合查看时间序列或序列中的趋势。
- **散点图**：用于识别两个变量之间的相关性。

## **5. 高级功能**

### **5.1 自定义SQL查询**
如果要修改从Druid获取的数据：
1. 打开 `stTest.py` 文件。
2. 找到 `get_data_from_druid` 函数中的SQL查询：
   ```python
   query = {
       "query": "SELECT * FROM 测试数据"
   }
   ```
3. 根据需要修改查询以获取不同的数据。

### **5.2 自定义可视化**
- **颜色方案**：修改 `seaborn` 或 `matplotlib` 设置以更改图表的外观。
- **图表类型**：您可以通过在代码中为可视化下拉菜单添加新选项来扩展可用的图表类型。

## **6. 故障排除**

### **6.1 常见问题**
- **数据未加载**：检查Druid服务器是否正在运行并可访问。确保SQL查询正确。
- **认证失败**：验证用户名和密码。确保服务器接受基本认证。

### **6.2 调试**
- **查看日志**：错误和日志直接显示在Streamlit界面中。要查看更详细的日志，请检查启动应用程序的终端。
- **处理异常**：该应用程序使用try-except块来处理错误。如果发生错误，界面中将显示错误消息。

## **7. 其他资源**

- **[Streamlit文档](https://docs.streamlit.io)**：了解更多关于使用Streamlit构建Web应用程序的信息。
- **[Pandas文档](https://pandas.pydata.org/docs)**：探索更多数据处理的知识。
- **[Matplotlib文档](https://matplotlib.org/stable/contents.html)**：了解更多关于Python绘图的内容。
- **[Seaborn文档](https://seaborn.pydata.org/)**：使用Seaborn增强您的图表。
- **[Plotly文档](https://plotly.com/python/)**：发现使用Plotly进行交互式绘图的方法。

